{% comment %}

This is a "drop-in" Django template widget to instantiate the edx-notifications front end application
which is a Backbone application that is defined in edx_notifications/server/web/static/js

This HTML snippet assumes that jQuery been included in the page that is using this widget

{% endcomment %}

<div id='edx_notification_counter'></div>
<div id="edx_notification_pane"></div>

<script type="text/javascript">

requirejs.config({
    paths: {
        jquery: '/static/js/jquery-1.11.2.min',
        backbone: '/static/js/backbone',
        underscore: '/static/js/underscore',
        text: '/static/js/text',
        notifications_app: '/static/edx_notifications/js/app',
        counter_icon_view: '/static/edx_notifications/js/views/counter_icon_view',
        counter_icon_model: '/static/edx_notifications/js/models/counter_icon_model',
        notification_pane_view: '/static/edx_notifications/js/views/notification_pane_view',
        notification_collection: '/static/edx_notifications/js/collections/notification_collection',
        user_notification_model: '/static/edx_notifications/js/models/user_notification_model'
    }
});

require([
    'notifications_app'
], function (NotificationApp) {
    'use strict';

    var app = new NotificationApp({
        endpoints: {
            unread_notification_count: "{% autoescape off %}{{ endpoints.unread_notification_count }}{% endautoescape %}",
            user_notifications: "{% autoescape off %}{{ endpoints.user_notifications }}{% endautoescape %}",
            renderer_templates_urls: "{% autoescape off %}{{ endpoints.renderer_templates_urls }}{% endautoescape %}"
        },
        view_templates: {
            notification_icon: "{% autoescape off %}{{ view_templates.notification_icon }}{% endautoescape %}",
            notification_pane: "{% autoescape off %}{{ view_templates.notification_pane }}{% endautoescape %}",
        }
    });
});
</script>

